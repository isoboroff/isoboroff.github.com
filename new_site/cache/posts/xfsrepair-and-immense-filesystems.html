<p><html><body><p>Just a quickie here.?? If you have a ginormous XFS filesystem, xfs_check may report "out of memory" and xfs_repair may churn with 100% CPU during phase 6 ("traversing filesystem").</p><p></p>The answer is to not use xfs_check, but instead do "xfs_repair -n".?? Also, add the "-P -o bsize=1024" options.?? Then keep an eye on xfs_repair's %CPU in top(1).?? If it starts churning at 99% or 100%, then kill it and bump the bsize larger.<p></p> I had one filesystem I had to boost bsize to 10240 and isize to 4096 before it would make it through the scan.<p></p> Caveat -- this was on a NAS box running a variant of RHEL4.?? I was using xfs_repair v2.9.8, which was the latest I could find without cooking up a complete RHEL4 build environment.?? It's possible the XFS folks have fixed this one in a more recent version.</body></html></p>